import{c as e,an as t,j as s,r as n,B as r,aa as a,O as i,a0 as l,E as o,az as c,N as m,ao as d,e as h,C as p,D as f,H as j,am as u}from"./main-CI4gkmxy.js";import{M as x,R as y}from"./myTable-Dy-lFYqv.js";import{C as k}from"./contentLayout-BXvUQUkR.js";import{R as g}from"./ReloadOutlined-BnXsUeSY.js";import"./transformData-Bopx9pV0.js";import"./MoneyCollectOutlined-BuffPyHB.js";import"./AlipayOutlined-BSkZgF8f.js";import"./index-BENF72bB.js";function w(){const n=e.c(21),{key:c,refresh:m}=t();let d,h,p,f,j,u,y,w;n[0]===Symbol.for("react.memo_cache_sentinel")?(d={title:"应用标题",key:"title",width:160},h={title:"应用描述",key:"description",width:460},p={title:"图标",key:"icon",width:100,render:S},f={title:"链接",key:"link",width:120,render:C},j={title:"标签",width:120,render:b},u={title:"提交人",key:"username",width:160,render:_},y={type:"time",title:"提交时间",key:"createdTime",width:200},n[0]=d,n[1]=h,n[2]=p,n[3]=f,n[4]=j,n[5]=u,n[6]=y):(d=n[0],h=n[1],p=n[2],f=n[3],j=n[4],u=n[5],y=n[6]),n[7]!==m?(w=[d,h,p,f,j,u,y,{title:"操作",fixed:"right",width:180,render:(e,t)=>s.jsx(A,{record:t,refresh:m})}],n[7]=m,n[8]=w):w=n[8];const N=w;let R,v,z,T,O,L,B;return n[9]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx(g,{}),n[9]=R):R=n[9],n[10]!==m?(v=s.jsx(r,{type:"primary",icon:R,onClick:()=>{m()},children:"刷新列表"}),n[10]=m,n[11]=v):v=n[11],n[12]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(a,{type:"warning",description:s.jsxs(s.Fragment,{children:[s.jsx(i,{className:"mr-1"}),"应用推荐将展示在 “ 每日宝藏 ” 中，服务端设置了 5 分钟缓存，如需查看最新的 “ 每日宝藏 ” 列表，请等待缓存失效或重启服务"]}),className:"mt-3 p-1 px-3 text-xs font-normal w-full"}),T=s.jsx(l,{className:"my-3"}),n[12]=z,n[13]=T):(z=n[12],T=n[13]),n[14]===Symbol.for("react.memo_cache_sentinel")?(O={searchParams:{status:0}},n[14]=O):O=n[14],n[15]!==N||n[16]!==c?(L=s.jsx(x,{columns:N,getListUrl:o.getAwaitingApprovalRecommendAppList,dataKey:"data.list",tableKey:c,params:O}),n[15]=N,n[16]=c,n[17]=L):L=n[17],n[18]!==L||n[19]!==v?(B=s.jsxs(k,{children:[v,z,T,L]}),n[18]=L,n[19]=v,n[20]=B):B=n[20],B}function _(e){return s.jsx(m,{color:e?"geekblue":"red",bordered:!1,icon:s.jsx(d,{}),children:e||"已注销"})}function b(e,t){return s.jsx(m,{color:t.tagColor,children:t.tagText||"-"})}function C(e){return s.jsx(r,{type:"link",size:"small",onClick:()=>{e&&window.open(e,"_blank")},children:e||"-"})}function S(e,t){return e?s.jsx(c,{src:e,width:"auto",height:32,className:"p-2 rounded-lg",style:{backgroundColor:t.iconBackground},preview:{maskClassName:"rounded-lg"},fallback:"/icons/default_image.svg"}):"-"}const A=n.memo(t=>{const a=e.c(42),{record:i,refresh:l}=t;let c;a[0]===Symbol.for("react.memo_cache_sentinel")?(c=[],a[0]=c):c=a[0];const[m,d]=n.useState(c);let x;a[1]!==i||a[2]!==l?(x=function(){const e=h.getState().user.token;p(0,d),setTimeout(()=>{f({url:o.approveRecommendApp,token:e,data:{id:i.id}}).then(e=>{200===e?.code&&l()}).finally(()=>{j(0,d)})},500)},a[1]=i,a[2]=l,a[3]=x):x=a[3];const k=x;let g;a[4]!==i||a[5]!==l?(g=function(e,t){p(t,d);const s=h.getState().user.token;setTimeout(()=>{f({url:"reject"===e?o.rejectRecommendApp:o.deleteRecommendApp,token:s,data:{id:i.id}}).then(e=>{200===e?.code&&l()}).finally(()=>{j(t,d)})},500)},a[4]=i,a[5]=l,a[6]=g):g=a[6];const w=g;let _,b,C,S,A;a[7]===Symbol.for("react.memo_cache_sentinel")?(_={width:"44px"},a[7]=_):_=a[7],a[8]!==m[0]?(b=m[0]?s.jsx(y,{}):"通过",a[8]=m[0],a[9]=b):b=a[9],a[10]!==m[0]||a[11]!==b?(C=s.jsx(r,{type:"link",size:"small",disabled:m[0],style:_,children:b}),a[10]=m[0],a[11]=b,a[12]=C):C=a[12],a[13]!==k||a[14]!==C?(S=s.jsx(u,{title:"是否确认审核通过？",onConfirm:k,children:C}),a[13]=k,a[14]=C,a[15]=S):S=a[15],a[16]!==w?(A=()=>{w("reject",1)},a[16]=w,a[17]=A):A=a[17];const N=m[1]||m[2];let R,v,z,T,O;a[18]===Symbol.for("react.memo_cache_sentinel")?(R={width:"44px"},a[18]=R):R=a[18],a[19]!==m[1]?(v=m[1]?s.jsx(y,{}):"驳回",a[19]=m[1],a[20]=v):v=a[20],a[21]!==v||a[22]!==N?(z=s.jsx(r,{danger:!0,type:"link",size:"small",disabled:N,style:R,children:v}),a[21]=v,a[22]=N,a[23]=z):z=a[23],a[24]!==z||a[25]!==A?(T=s.jsx(u,{title:"是否确认驳回申请",onConfirm:A,children:z}),a[24]=z,a[25]=A,a[26]=T):T=a[26],a[27]!==w?(O=()=>{w("delete",2)},a[27]=w,a[28]=O):O=a[28];const L=m[1]||m[2];let B,D,K,M,E;return a[29]===Symbol.for("react.memo_cache_sentinel")?(B={width:"44px"},a[29]=B):B=a[29],a[30]!==m[2]?(D=m[2]?s.jsx(y,{}):"删除",a[30]=m[2],a[31]=D):D=a[31],a[32]!==L||a[33]!==D?(K=s.jsx(r,{danger:!0,type:"link",size:"small",disabled:L,style:B,children:D}),a[32]=L,a[33]=D,a[34]=K):K=a[34],a[35]!==O||a[36]!==K?(M=s.jsx(u,{title:"是否确认删除该申请？",onConfirm:O,children:K}),a[35]=O,a[36]=K,a[37]=M):M=a[37],a[38]!==T||a[39]!==M||a[40]!==S?(E=s.jsxs("div",{className:"flex flex-wrap",children:[S,T,M]}),a[38]=T,a[39]=M,a[40]=S,a[41]=E):E=a[41],E});export{w as default};
