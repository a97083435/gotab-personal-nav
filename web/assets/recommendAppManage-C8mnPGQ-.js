import{c as e,ao as t,F as r,r as s,j as l,w as i,aw as n,B as a,ax as o,a0 as c,aq as m,ar as d,az as h,E as x,N as f,aA as u,ap as j,C as p,e as y,D as k,H as w,an as g}from"./main-Bo2fjBi0.js";import{r as _}from"./transformData-BHPmoXBW.js";import{M as b,R as S}from"./myTable-VeFSlHOA.js";import{C}from"./contentLayout-B4GdiHKg.js";import{R as N}from"./SortAscendingOutlined-BPc3ODPb.js";import"./MoneyCollectOutlined-CiLMzwXP.js";import"./AlipayOutlined-BdhF7bUL.js";import"./index-DvU2YQOQ.js";function A(){const f=e.c(47),{key:u,refresh:j}=t(),[p]=r.useForm();let y;f[0]===Symbol.for("react.memo_cache_sentinel")?(y={},f[0]=y):y=f[0];const[k,w]=s.useState(y);let g,S,N,A,L,O,B,D,K,q;f[1]===Symbol.for("react.memo_cache_sentinel")?(g={title:"应用标题",key:"title",width:160},S={title:"状态",key:"status",width:120,render:z},N={title:"排序",key:"sort",width:80,render:T},A={title:"应用描述",key:"description",width:460},L={title:"图标",key:"icon",width:100,render:R},O={title:"链接",key:"link",width:120,render:I},B={title:"标签",width:120,render:F},D={title:"推荐人",key:"username",width:160,render:v},K={type:"time",title:"推荐时间",key:"createdTime",width:200},f[1]=g,f[2]=S,f[3]=N,f[4]=A,f[5]=L,f[6]=O,f[7]=B,f[8]=D,f[9]=K):(g=f[1],S=f[2],N=f[3],A=f[4],L=f[5],O=f[6],B=f[7],D=f[8],K=f[9]),f[10]!==j?(q=[g,S,N,A,L,O,B,D,K,{title:"操作",fixed:"right",width:120,render:(e,t)=>l.jsx(M,{record:t,refresh:j})}],f[10]=j,f[11]=q):q=f[11];const E=q;let H,P,U,V,Y,$,G,J,Q,W,X,Z,ee,te,re,se,le;return f[12]!==p?(H=()=>{const e=p.getFieldsValue();e[Math.random()]=!0,w(_(e))},f[12]=p,f[13]=H):H=f[13],f[14]===Symbol.for("react.memo_cache_sentinel")?(P={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridAutoRows:"32px"},f[14]=P):P=f[14],f[15]===Symbol.for("react.memo_cache_sentinel")?(U=l.jsx(r.Item,{name:"title",children:l.jsx(i,{placeholder:"标题"})}),f[15]=U):U=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(V=l.jsxs("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:P,children:[U,l.jsx(r.Item,{name:"link",children:l.jsx(i,{placeholder:"链接"})})]}),f[16]=V):V=f[16],f[17]!==p?(Y=()=>{p.submit()},f[17]=p,f[18]=Y):Y=f[18],f[19]===Symbol.for("react.memo_cache_sentinel")?($=l.jsx(n,{}),f[19]=$):$=f[19],f[20]!==Y?(G=l.jsx(a,{type:"primary",onClick:Y,icon:$,children:"查询"}),f[20]=Y,f[21]=G):G=f[21],f[22]!==p?(J=()=>{p.resetFields();const e={};e[Math.random()]=!0,w(e)},f[22]=p,f[23]=J):J=f[23],f[24]===Symbol.for("react.memo_cache_sentinel")?(Q=l.jsx(o,{}),f[24]=Q):Q=f[24],f[25]!==J?(W=l.jsx(a,{onClick:J,icon:Q,children:"重置"}),f[25]=J,f[26]=W):W=f[26],f[27]!==G||f[28]!==W?(X=l.jsxs("div",{className:"flex flex-wrap gap-3",children:[G,W]}),f[27]=G,f[28]=W,f[29]=X):X=f[29],f[30]!==p||f[31]!==H||f[32]!==X?(Z=l.jsxs(r,{className:"w-full",form:p,onFinish:H,children:[V,X]}),f[30]=p,f[31]=H,f[32]=X,f[33]=Z):Z=f[33],f[34]===Symbol.for("react.memo_cache_sentinel")?(ee=l.jsx(c,{className:"my-3"}),f[34]=ee):ee=f[34],f[35]!==j?(te=l.jsx("div",{className:"mb-3",children:l.jsx(a,{type:"primary",onClick:()=>{m.show(d,{title:"新增推荐",children:l.jsx(h,{refresh:j})})},children:"新增推荐"})}),f[35]=j,f[36]=te):te=f[36],f[37]!==k?(re={searchParams:k},f[37]=k,f[38]=re):re=f[38],f[39]!==E||f[40]!==u||f[41]!==re?(se=l.jsx(b,{columns:E,getListUrl:x.getAwaitingApprovalRecommendAppList,dataKey:"data.list",tableKey:u,params:re}),f[39]=E,f[40]=u,f[41]=re,f[42]=se):se=f[42],f[43]!==Z||f[44]!==te||f[45]!==se?(le=l.jsxs(C,{children:[Z,ee,te,se]}),f[43]=Z,f[44]=te,f[45]=se,f[46]=le):le=f[46],le}function v(e){return l.jsx(f,{color:e?"geekblue":"red",bordered:!1,icon:l.jsx(j,{}),children:e||"已注销"})}function F(e,t){return l.jsx(f,{color:t.tagColor,children:t.tagText||"-"})}function I(e){return l.jsx(a,{type:"link",size:"small",onClick:()=>{e&&window.open(e,"_blank")},children:e||"-"})}function R(e,t){return e?l.jsx(u,{src:e,width:"auto",height:32,className:"p-1 rounded-lg",style:{backgroundColor:t.iconBackground},fallback:"/icons/default_image.svg",preview:{maskClassName:"rounded-lg"}}):"-"}function T(e){return l.jsx(f,{color:"gold",icon:l.jsx(N,{}),children:e||"-"})}function z(e){return l.jsx(f,{color:0===e?"blue":1===e?"green":"red",children:0===e?"待审核":1===e?"正常":"被驳回"})}const M=s.memo(t=>{const r=e.c(26),{record:i,refresh:n}=t;let o;r[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],r[0]=o):o=r[0];const[c,h]=s.useState(o);let f;r[1]!==i||r[2]!==n?(f=function(){p(1,h);const e=y.getState().user.token;setTimeout(()=>{k({url:x.deleteRecommendApp,token:e,data:{id:i.id}}).then(e=>{200===e?.code&&n()}).finally(()=>{w(1,h)})},500)},r[1]=i,r[2]=n,r[3]=f):f=r[3];const u=f;let j,_,b,C,N,A,v,F,I;return r[4]===Symbol.for("react.memo_cache_sentinel")?(j={width:"44px"},r[4]=j):j=r[4],r[5]!==i||r[6]!==n?(_=()=>{m.show(d,{title:"编辑推荐",children:l.jsx(L,{editItem:i,refresh:n})})},r[5]=i,r[6]=n,r[7]=_):_=r[7],r[8]!==c[0]?(b=c[0]?l.jsx(S,{}):"编辑",r[8]=c[0],r[9]=b):b=r[9],r[10]!==c[0]||r[11]!==_||r[12]!==b?(C=l.jsx(a,{type:"link",size:"small",disabled:c[0],style:j,onClick:_,children:b}),r[10]=c[0],r[11]=_,r[12]=b,r[13]=C):C=r[13],r[14]===Symbol.for("react.memo_cache_sentinel")?(N={width:"44px"},r[14]=N):N=r[14],r[15]!==c[1]?(A=c[1]?l.jsx(S,{}):"删除",r[15]=c[1],r[16]=A):A=r[16],r[17]!==c[1]||r[18]!==A?(v=l.jsx(a,{danger:!0,type:"link",size:"small",disabled:c[1],style:N,children:A}),r[17]=c[1],r[18]=A,r[19]=v):v=r[19],r[20]!==u||r[21]!==v?(F=l.jsx(g,{title:"是否确认删除该推荐？",onConfirm:u,children:v}),r[20]=u,r[21]=v,r[22]=F):F=r[22],r[23]!==C||r[24]!==F?(I=l.jsxs("div",{className:"flex flex-wrap",children:[C,F]}),r[23]=C,r[24]=F,r[25]=I):I=r[25],I}),L=t=>{const r=e.c(3),{editItem:s,refresh:i}=t;let n;return r[0]!==s||r[1]!==i?(n=l.jsx(l.Fragment,{children:l.jsx(h,{editItem:s,refresh:i,type:"edit"})}),r[0]=s,r[1]=i,r[2]=n):n=r[2],n};export{A as default};
