import{c as e,F as l,r as a,j as s,w as r,L as t,a8 as n,B as o,n as c,C as m,e as i,a9 as u,H as d,D as f,aa as h,O as p,am as x,E as S}from"./main-CI4gkmxy.js";import{r as j}from"./transformData-Bopx9pV0.js";import{C as _}from"./contentLayout-BXvUQUkR.js";function b(){const b=e.c(33),[y]=l.useForm();let g;b[0]===Symbol.for("react.memo_cache_sentinel")?(g=[],b[0]=g):g=b[0];const[w,q]=a.useState(g);let C;b[1]!==y?(C=function(){m(0,q);const e=i.getState().user.token;u({url:S.getSmtpConfig,token:e}).then(e=>{y.setFieldsValue(j(e.data))}).finally(()=>{d(0,q)})},b[1]=y,b[2]=C):C=b[2];const T=C;let L,F,N;b[3]!==T?(L=()=>{T()},b[3]=T,b[4]=L):L=b[4],b[5]===Symbol.for("react.memo_cache_sentinel")?(F=[],b[5]=F):F=b[5],a.useEffect(L,F),b[6]===Symbol.for("react.memo_cache_sentinel")?(N=function(e){m(1,q);const l=i.getState().user.token;f({url:S.updateSmtpConfig,token:l,data:e}).finally(()=>{d(1,q)})},b[6]=N):N=b[6];const k=N;let v;b[7]!==y?(v=function(){m(1,q);const e=i.getState().user.token;f({url:S.clearSmtpConfig,token:e}).finally(()=>{y.resetFields(),y.setFieldValue("port",0),d(1,q)})},b[7]=y,b[8]=v):v=b[8];const I=v;let A,D,E,R,V,B,H,O,P,Y,z,G,J,K;return b[9]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx(h,{type:"warning",description:s.jsxs(s.Fragment,{children:[s.jsx(p,{className:"mr-1"}),"更新用于用户注册的邮箱验证码发送验证的邮件服务器配置，推荐使用：阿里企业邮箱或者微信企业邮箱"]}),className:"mb-4 p-1 px-3 text-xs font-normal w-full"}),b[9]=A):A=b[9],b[10]===Symbol.for("react.memo_cache_sentinel")?(D={flex:"120px"},b[10]=D):D=b[10],b[11]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(l.Item,{label:"服务器地址",required:!0,name:"host",rules:[{required:!0}],children:s.jsx(r,{placeholder:"服务器地址"})}),b[11]=E):E=b[11],b[12]===Symbol.for("react.memo_cache_sentinel")?(R=[{required:!0}],b[12]=R):R=b[12],b[13]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx(l.Item,{label:"加密方式",required:!0,name:"encryption",rules:R,children:s.jsx(t,{placeholder:"加密方式",options:[{value:"None",label:"不加密"},{value:"SSL/TLS",label:"SSL/TLS"},{value:"STARTTLS",label:"STARTTLS"}]})}),b[13]=V):V=b[13],b[14]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(l.Item,{label:"端口",required:!0,name:"port",rules:[{required:!0}],children:s.jsx(n,{placeholder:"端口"})}),b[14]=B):B=b[14],b[15]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsx(l.Item,{label:"用户名",required:!0,name:"username",rules:[{required:!0}],children:s.jsx(r,{placeholder:"用户名"})}),b[15]=H):H=b[15],b[16]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(l.Item,{label:"密码",required:!0,name:"password",rules:[{required:!0}],children:s.jsx(r.Password,{autoComplete:"new-password",placeholder:"密码"})}),b[16]=O):O=b[16],b[17]!==w[1]?(P=s.jsx(o,{htmlType:"submit",type:"primary",className:"w-full max-w-64",loading:w[1],children:"保存配置"}),b[17]=w[1],b[18]=P):P=b[18],b[19]!==w[1]?(Y=s.jsx(o,{danger:!0,loading:w[1],children:"删除配置"}),b[19]=w[1],b[20]=Y):Y=b[20],b[21]!==I||b[22]!==Y?(z=s.jsx(x,{title:"是否确认删除？",onConfirm:I,children:Y}),b[21]=I,b[22]=Y,b[23]=z):z=b[23],b[24]!==P||b[25]!==z?(G=s.jsxs("div",{className:"w-full flex justify-center gap-3 flex-wrap",children:[P,z]}),b[24]=P,b[25]=z,b[26]=G):G=b[26],b[27]!==y||b[28]!==G?(J=s.jsxs(l,{autoComplete:"off",form:y,className:"w-full",labelCol:D,onFinish:k,children:[E,V,B,H,O,G]}),b[27]=y,b[28]=G,b[29]=J):J=b[29],b[30]!==w[0]||b[31]!==J?(K=s.jsxs(_,{children:[A,s.jsx("div",{className:"w-full",children:s.jsx(c,{spinning:w[0],children:J})})]}),b[30]=w[0],b[31]=J,b[32]=K):K=b[32],K}export{b as default};
